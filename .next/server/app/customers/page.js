(()=>{var e={};e.id=812,e.ids=[812],e.modules={506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/lehoanganh/Documents/FB Netwwork +/FE/CRM_FWF/src/app/customers/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/lehoanganh/Documents/FB Netwwork +/FE/CRM_FWF/src/app/customers/page.tsx","default")},3022:(e,t,s)=>{Promise.resolve().then(s.bind(s,506))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13193:(e,t,s)=>{"use strict";s.d(t,{E:()=>o,h:()=>d});var a=s(60687),r=s(43210),l=s(5336),n=s(35071),i=s(11860);let o=({type:e,message:t,isVisible:s,onClose:o,duration:d=5e3})=>{let[c,x]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{if(s){x(!0);let e=setTimeout(()=>{x(!1),setTimeout(o,300)},d);return()=>clearTimeout(e)}},[s,d,o]),!s)return null;let h="success"===e?"text-green-800":"text-red-800",m="success"===e?l.A:n.A;return(0,a.jsx)("div",{className:`fixed top-4 right-4 z-50 max-w-sm w-full transition-all duration-300 ease-in-out ${c?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"}`,children:(0,a.jsx)("div",{className:`${"success"===e?"bg-green-50":"bg-red-50"} border ${"success"===e?"border-green-200":"border-red-200"} rounded-lg shadow-lg p-4`,children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(m,{className:`h-5 w-5 ${"success"===e?"text-green-400":"text-red-400"}`})}),(0,a.jsx)("div",{className:"ml-3 flex-1",children:(0,a.jsx)("p",{className:`text-sm font-medium ${h}`,children:t})}),(0,a.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,a.jsx)("button",{onClick:()=>{x(!1),setTimeout(o,300)},className:`inline-flex ${h} hover:${h} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-${"success"===e?"green":"red"}-500`,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})})]})})})},d=()=>{let[e,t]=(0,r.useState)({type:"success",message:"",isVisible:!1});return{notification:e,showSuccess:e=>{t({type:"success",message:e,isVisible:!0})},showError:e=>{t({type:"error",message:e,isVisible:!0})},hideNotification:()=>{t(e=>({...e,isVisible:!1}))}}}},15249:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>d});var a=s(65239),r=s(48088),l=s(88170),n=s.n(l),i=s(30893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d={children:["",{children:["customers",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,506)),"/Users/lehoanganh/Documents/FB Netwwork +/FE/CRM_FWF/src/app/customers/page.tsx"]}]},{loading:[()=>Promise.resolve().then(s.bind(s,89715)),"/Users/lehoanganh/Documents/FB Netwwork +/FE/CRM_FWF/src/app/customers/loading.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"/Users/lehoanganh/Documents/FB Netwwork +/FE/CRM_FWF/src/app/layout.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,67393)),"/Users/lehoanganh/Documents/FB Netwwork +/FE/CRM_FWF/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,54413)),"/Users/lehoanganh/Documents/FB Netwwork +/FE/CRM_FWF/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/lehoanganh/Documents/FB Netwwork +/FE/CRM_FWF/src/app/customers/page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/customers/page",pathname:"/customers",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},61678:(e,t,s)=>{"use strict";s.d(t,{b:()=>i});var a=s(43210),r=s(49605),l=s(54024),n=["axis"],i=(0,a.forwardRef)((e,t)=>a.createElement(l.P,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:n,tooltipPayloadSearcher:r.uN,categoricalChartProps:e,ref:t}))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66070:(e,t,s)=>{Promise.resolve().then(s.bind(s,73483))},70212:(e,t,s)=>{"use strict";s.d(t,{V:()=>r,e:()=>l});var a=s(43210);function r(e,t){let[s,r]=(0,a.useState)(()=>t);return[s,t=>{try{let e="function"==typeof t?t(s):t;r(e)}catch(t){console.warn(`Error setting localStorage key "${e}":`,t)}}]}function l(e){}s(7562)},73483:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>P});var a=s(60687),r=s(43210),l=s.n(r),n=s(67763),i=s(7562);let o=({allHourRanges:e,facilityHourTableData:t,getCellBg:s,isMobile:r,loadingFacilityHour:l,errorFacilityHour:n})=>(0,a.jsxs)("div",{className:"w-full bg-white rounded-xl shadow-lg p-4 mt-5",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mt-5 gap-4",children:[(0,a.jsx)("h2",{className:"text-lg sm:text-xl font-semibold",children:"Thời gian đơn h\xe0ng được tạo"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs mt-2 sm:mt-0",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded bg-[#68B2A0] text-white",children:"Cao điểm (≥90%)"}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded bg-[#CDE0C9]",children:"Bận rộn (≥70%)"}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded bg-[#E0ECDE]",children:"Kh\xe1 bận (≥50%)"}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded bg-[#F0F8F0]",children:"\xcdt bận (≥30%)"}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded bg-[#F8FCF8]",children:"Thưa thớt (≥10%)"})]})]}),l?(0,a.jsx)("div",{children:"Đang tải dữ liệu..."}):n?(0,a.jsx)("div",{className:"text-red-500",children:n}):(0,a.jsx)("div",{className:"overflow-x-auto mt-4 custom-scrollbar",children:(0,a.jsx)("div",{className:"max-h-[320px] overflow-y-auto custom-scrollbar",children:(0,a.jsx)("div",{className:"max-h-[320px] overflow-y-auto",children:(0,a.jsxs)("table",{className:`min-w-[600px] w-full border text-center ${r?"text-xs":""}`,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:`border px-2 py-1 bg-[#2C6975] text-white text-left font-bold ${r?"text-xs":""} sticky left-0 z-10`,children:"Cơ sở"}),e.map(e=>(0,a.jsx)("th",{className:`border px-2 py-1 font-bold text-sm bg-[#2C6975] text-white ${r?"text-xs px-1 py-0.5":""}`,children:e},e)),(0,a.jsx)("th",{className:`border px-2 py-1 bg-[#2C6975] text-white font-bold ${r?"text-xs":""} sticky right-0 z-10`,children:"Tổng"})]})}),(0,a.jsx)("tbody",{children:t.map(t=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:`border px-2 py-1 text-left font-semibold ${r?"text-xs px-1 py-0.5":""} sticky left-0 z-10 bg-gray-50`,children:t.facility}),e.map(e=>{let l=Number(t[e]??0);return(0,a.jsx)("td",{className:`border px-2 py-1 ${s(l,e)} ${r?"text-xs px-1 py-0.5":""}`,children:l},e)}),(0,a.jsx)("td",{className:`border px-2 py-1 font-bold ${r?"text-xs px-1 py-0.5":""} sticky right-0 z-10 bg-gray-100`,children:t.total})]},t.facility))})]})})})})]}),d=({startDate:e,endDate:t,setStartDate:s,setEndDate:r,today:l,getLocalTimeZone:n,parseDate:i,selectedType:o,setSelectedType:d,showTypeDropdown:c,setShowTypeDropdown:x,customerTypes:h,selectedStatus:m,setSelectedStatus:u,showStatusDropdown:g,setShowStatusDropdown:p,customerStatus:f,selectedRegions:b,setSelectedRegions:j,showRegionDropdown:y,setShowRegionDropdown:v,allRegions:w,selectedBranches:N,setSelectedBranches:S,showBranchDropdown:k,setShowBranchDropdown:C,allBranches:$})=>(0,a.jsxs)("div",{className:"flex flex-col gap-4 lg:gap-6 mb-4 lg:mb-6",children:[(0,a.jsxs)("div",{className:"w-full flex flex-col sm:flex-row gap-4 bg-white p-4 rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"flex-1 flex flex-col gap-1",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Start date"}),(0,a.jsx)("input",{type:"date",className:"border border-gray-300 rounded p-2 bg-white focus:outline-none focus:ring-2 focus:ring-[#f66035]",value:e.toString(),onChange:e=>{s(i(e.target.value))},max:l(n()).toString()})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col gap-1",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"End date"}),(0,a.jsx)("input",{type:"date",className:"border border-gray-300 rounded p-2 bg-white focus:outline-none focus:ring-2 focus:ring-[#f66035]",value:t.toString(),onChange:e=>{r(i(e.target.value))},min:e?e.add({days:1}).toString():void 0,max:l(n()).toString()})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{className:"block border rounded p-2 w-full text-left bg-white shadow border-[orange] hover:bg-gray-50 transition-colors",onClick:()=>x(!c),type:"button",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Loại kh\xe1ch"}),o.length>0&&(0,a.jsxs)("span",{children:[" (",o.length,")"]}),(0,a.jsx)("span",{className:"float-right",children:"▼"})]}),c&&(0,a.jsxs)("div",{className:"absolute z-20 bg-white border rounded shadow w-full mt-1 max-h-60 overflow-auto",children:[(0,a.jsxs)("label",{className:"flex items-center px-3 py-2 cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)("input",{type:"checkbox",checked:0===o.length,onChange:()=>d([]),className:"mr-2"}),"Tất cả"]}),h.map(e=>(0,a.jsxs)("label",{className:"flex items-center px-3 py-2 cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)("input",{type:"checkbox",checked:o.includes(e),onChange:()=>{o.includes(e)?d(o.filter(t=>t!==e)):d([...o,e])},className:"mr-2"}),e]},e)),(0,a.jsx)("button",{className:"w-full text-center py-2 text-orange-600 hover:underline",onClick:()=>x(!1),type:"button",children:"Đ\xf3ng"})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{className:"block border rounded p-2 w-full text-left bg-white shadow border-[orange] hover:bg-gray-50 transition-colors",onClick:()=>p(!g),type:"button",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Kh\xe1ch mới/cũ"}),m&&(0,a.jsxs)("span",{children:[": ",m]}),(0,a.jsx)("span",{className:"float-right",children:"▼"})]}),g&&(0,a.jsxs)("div",{className:"absolute z-20 bg-white border rounded shadow w-full mt-1 max-h-60 overflow-auto",children:[(0,a.jsxs)("label",{className:"flex items-center px-3 py-2 cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)("input",{type:"radio",name:"customerStatus",checked:!m,onChange:()=>u(null),className:"mr-2"}),"Tất cả"]}),f.map(e=>(0,a.jsxs)("label",{className:"flex items-center px-3 py-2 cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)("input",{type:"radio",name:"customerStatus",checked:m===e,onChange:()=>u(e),className:"mr-2"}),e]},e)),(0,a.jsx)("button",{className:"w-full text-center py-2 text-orange-600 hover:underline",onClick:()=>p(!1),type:"button",children:"Đ\xf3ng"})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{className:"block border rounded p-2 w-full text-left bg-white shadow border-[orange] hover:bg-gray-50 transition-colors",onClick:()=>v(!y),type:"button",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Region"}),b.length>0&&(0,a.jsxs)("span",{children:[" (",b.length,")"]}),(0,a.jsx)("span",{className:"float-right",children:"▼"})]}),y&&(0,a.jsxs)("div",{className:"absolute z-20 bg-white border rounded shadow w-full mt-1 max-h-60 overflow-auto",children:[(0,a.jsxs)("label",{className:"flex items-center px-3 py-2 cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)("input",{type:"checkbox",checked:0===b.length,onChange:()=>j([]),className:"mr-2"}),"Tất cả"]}),w.map(e=>(0,a.jsxs)("label",{className:"flex items-center px-3 py-2 cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)("input",{type:"checkbox",checked:b.includes(e),onChange:()=>{b.includes(e)?j(b.filter(t=>t!==e)):j([...b,e])},className:"mr-2"}),e]},e)),(0,a.jsx)("button",{className:"w-full text-center py-2 text-orange-600 hover:underline",onClick:()=>v(!1),type:"button",children:"Đ\xf3ng"})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{className:"block border rounded p-2 w-full text-left bg-white shadow border-[orange]",onClick:()=>C(!k),type:"button",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Branch"}),N.length>0&&(0,a.jsxs)("span",{children:[" (",N.length,")"]}),(0,a.jsx)("span",{className:"float-right",children:"▼"})]}),k&&(0,a.jsxs)("div",{className:"absolute z-20 bg-white border rounded shadow w-64 mt-1 max-h-60 overflow-auto",children:[(0,a.jsxs)("label",{className:"flex items-center px-3 py-2 cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)("input",{type:"checkbox",checked:0===N.length,onChange:()=>S([]),className:"mr-2"}),"Tất cả"]}),$.map(e=>(0,a.jsxs)("label",{className:"flex items-center px-3 py-2 cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)("input",{type:"checkbox",checked:N.includes(e),onChange:()=>{N.includes(e)?S(N.filter(t=>t!==e)):S([...N,e])},className:"mr-2"}),e]},e)),(0,a.jsx)("button",{className:"w-full text-center py-2 text-orange-600 hover:underline",onClick:()=>C(!1),type:"button",children:"Đ\xf3ng"})]})]})]})]}),c=({value:e,label:t,percentChange:s,loading:r,error:l})=>(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow p-4 lg:p-6 flex flex-col items-center col-span-1 lg:col-span-4",children:[(0,a.jsx)("div",{className:"text-sm lg:text-xl text-gray-700 mb-2 text-center font-semibold",children:t}),(0,a.jsx)("div",{className:"text-3xl lg:text-5xl font-bold text-[#f66035] mb-2",children:r?(0,a.jsx)("span",{children:"Đang tải dữ liệu..."}):l?(0,a.jsx)("span",{className:"text-red-500",children:l}):(0,a.jsxs)(a.Fragment,{children:[e," ",(0,a.jsx)("span",{className:"text-lg lg:text-2xl",children:"kh\xe1ch"})]})}),void 0!==s&&!r&&!l&&(0,a.jsxs)("div",{className:`text-base lg:text-xl font-semibold ${s>0?"text-green-600":s<0?"text-red-500":"text-gray-500"}`,children:[s>0?"↑":s<0?"↓":""," ",Math.abs(s).toFixed(2),"%"]})]}),x=({value:e,label:t,color:s,loading:r,error:l,unit:n="đ"})=>(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow p-4 lg:p-6 flex flex-col items-center",children:[(0,a.jsx)("div",{className:"text-sm lg:text-xl text-gray-700 mb-2 text-center",children:t}),(0,a.jsx)("div",{className:`text-2xl font-bold ${s} mb-2`,children:r?(0,a.jsx)("span",{children:"Đang tải..."}):l?(0,a.jsx)("span",{className:"text-red-500",children:l}):(0,a.jsxs)(a.Fragment,{children:[e??0,(0,a.jsx)("span",{className:"text-lg lg:text-2xl",children:n})]})})]}),h=({loading:e,error:t,avgRevenueMale:s,avgRevenueFemale:r,avgServiceMale:l,avgServiceFemale:n})=>(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6 mb-4 lg:mb-6 mt-5",children:[(0,a.jsx)(x,{value:s,label:"Trung b\xecnh đơn thực thu (Nam)",color:"text-[#f66035]",loading:e,error:t}),(0,a.jsx)(x,{value:r,label:"Trung b\xecnh đơn thực thu (Nữ)",color:"text-[#0693e3]",loading:e,error:t}),(0,a.jsx)(x,{value:l,label:"Trung b\xecnh đơn dịch vụ (Nam)",color:"text-[#00d082]",loading:e,error:t}),(0,a.jsx)(x,{value:n,label:"Trung b\xecnh đơn dịch vụ (Nữ)",color:"text-[#9b51e0]",loading:e,error:t})]});var m=s(48482),u=s(61678),g=s(85168),p=s(27747),f=s(19598),b=s(23812),j=s(15202),y=s(83446),v=s(56651),w=s(56988),N=s(25679);let S=({isMobile:e,loadingNewCustomer:t,errorNewCustomer:s,newCustomerChartData:r,loadingGenderRatio:l,errorGenderRatio:n,genderRatioData:i,COLORS:o})=>(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row w-full gap-4 lg:gap-4",children:[(0,a.jsx)("div",{className:`bg-white rounded-xl shadow p-2 ${e?"w-full flex justify-center items-center mx-auto":"lg:w-1/2"} ${e?"max-w-xs":""}`,style:{minWidth:e?220:void 0},children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("h2",{className:"text-base lg:text-xl text-center font-semibold text-gray-800 mb-2",children:"Số kh\xe1ch tạo mới"}),t?(0,a.jsx)("div",{children:"Đang tải dữ liệu..."}):s?(0,a.jsx)("div",{className:"text-red-500",children:s}):(0,a.jsx)(m.u,{width:"100%",height:e?220:350,minWidth:220,children:(0,a.jsxs)(u.b,{data:r,margin:{top:e?10:30,right:10,left:10,bottom:e?20:40},children:[(0,a.jsx)(g.d,{stroke:"#e5e7eb",strokeDasharray:"5 5"}),(0,a.jsx)(p.W,{dataKey:"date",stroke:"#6b7280",fontSize:e?10:12,tickLine:!1,axisLine:{stroke:"#d1d5db"},angle:e?-20:0,textAnchor:e?"end":"middle",height:e?40:60,tickFormatter:e=>{if(!e)return"";let t=String(e).match(/^\d{4}-(\d{2})-(\d{2})$/);if(t){let[,e,s]=t;return`${s}/${e}`}return String(e)}}),(0,a.jsx)(f.h,{stroke:"#6b7280",fontSize:e?10:12,tickLine:!1,axisLine:{stroke:"#d1d5db"},tickFormatter:e=>e>0?`${e} `:e,padding:{bottom:10,top:10}}),(0,a.jsx)(b.m,{}),(0,a.jsx)(j.s,{wrapperStyle:{paddingTop:e?0:"20px",fontSize:e?"10px":"14px",color:"#4b5563",display:e?"none":void 0},iconType:"circle",iconSize:e?8:10}),(0,a.jsx)(y.N,{type:"natural",dataKey:"value",name:"Số kh\xe1ch mới trong hệ thống",stroke:"#5bd1d7",strokeWidth:2,dot:!1,activeDot:{r:6,fill:"#5bd1d7",stroke:"#fff",strokeWidth:2},animationDuration:1500}),(0,a.jsx)(y.N,{type:"natural",dataKey:"value2",name:"Số kh\xe1ch mới trong hệ thống (kỳ trước)",stroke:"#eb94cf",strokeWidth:2,dot:!1,activeDot:{r:6,fill:"#eb94cf",stroke:"#fff",strokeWidth:2},animationDuration:1500})]})})]})}),(0,a.jsxs)("div",{className:`bg-white rounded-xl shadow p-2 ${e?"w-full max-w-xs mx-auto flex flex-col items-center":"lg:w-1/2"}`,style:{minWidth:e?220:void 0},children:[(0,a.jsx)("h2",{className:"text-base lg:text-xl font-semibold text-gray-800 mb-2 text-center",children:"Tỷ lệ nam/nữ kh\xe1ch mới tạo"}),(0,a.jsx)("div",{className:"w-full flex justify-center",children:l?(0,a.jsx)("div",{children:"Loading..."}):n?(0,a.jsx)("div",{className:"text-red-500",children:n}):(0,a.jsx)(m.u,{width:"100%",height:e?180:350,minWidth:220,children:(0,a.jsxs)(v.r,{children:[(0,a.jsx)(w.F,{data:i,cx:"50%",cy:"50%",innerRadius:"0%",outerRadius:e?"40%":"80%",fill:"#f933347",dataKey:"count",nameKey:"gender",labelLine:!1,label:({cx:t=0,cy:s=0,midAngle:r=0,innerRadius:l=0,outerRadius:n=0,percent:i=0,gender:d="",index:c=0})=>{let x=Math.PI/180,h=(l+n)/.8,m=t+h*Math.cos(-r*x),u=s+h*Math.sin(-r*x);return(0,a.jsx)("text",{x:m,y:u,fill:o[c%o.length],fontSize:e?12:16,textAnchor:m>t?"start":"end",dominantBaseline:"central",fontWeight:600,children:`${d}: ${(100*i).toFixed(1)}%`})},children:i.map((e,t)=>(0,a.jsx)(N.f,{fill:o[t%o.length]},e.gender))}),(0,a.jsx)(b.m,{}),(0,a.jsx)(j.s,{wrapperStyle:{paddingTop:e?0:"20px",fontSize:e?"10px":"14px",color:"#4b5563",display:e?"none":void 0},iconType:"circle",iconSize:e?8:10})]})})})]})]}),k=({loadingCustomerSummary:e,errorCustomerSummary:t,customerSummaryRaw:s})=>(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 md:gap-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex-1 bg-white rounded-xl shadow-lg p-6 flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"text-xl font-medium text-gray-700 mb-2 text-center",children:"Tổng số kh\xe1ch mới trong hệ thống"}),(0,a.jsx)("div",{className:"text-5xl font-bold text-black mb-2",children:e?(0,a.jsx)("span",{children:"Đang tải dữ liệu..."}):t?(0,a.jsx)("span",{className:"text-red-500",children:t}):s?.totalNewCustomers?.toLocaleString()??0}),!e&&!t&&s?.growthTotal!==void 0&&(0,a.jsxs)("div",{className:`flex items-center gap-1 text-sm font-medium ${s.growthTotal>=0?"text-green-600":"text-red-600"}`,children:[(0,a.jsx)("span",{children:s.growthTotal>=0?"↗":"↘"}),(0,a.jsxs)("span",{children:[Math.abs(s.growthTotal).toFixed(1),"%"]}),(0,a.jsx)("span",{className:"text-gray-500",children:"so với kỳ trước"})]})]}),(0,a.jsxs)("div",{className:"flex-1 bg-white rounded-xl shadow-lg p-6 flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"text-xl font-medium text-gray-700 mb-2 text-center",children:"Tổng số kh\xe1ch mới thực đi"}),(0,a.jsx)("div",{className:"text-5xl font-bold text-black mb-2",children:e?(0,a.jsx)("span",{children:"Đang tải dữ liệu..."}):t?(0,a.jsx)("span",{className:"text-red-500",children:t}):s?.actualCustomers?.toLocaleString()??0}),!e&&!t&&s?.growthActual!==void 0&&(0,a.jsxs)("div",{className:`flex items-center gap-1 text-sm font-medium ${s.growthActual>=0?"text-green-600":"text-red-600"}`,children:[(0,a.jsx)("span",{children:s.growthActual>=0?"↗":"↘"}),(0,a.jsxs)("span",{children:[Math.abs(s.growthActual).toFixed(1),"%"]}),(0,a.jsx)("span",{className:"text-gray-500",children:"so với kỳ trước"})]})]})]}),C=({isMobile:e,customerTypeTrendData:t,customerTypeKeys:s,COLORS:r})=>(0,a.jsxs)("div",{className:`bg-white pt-2 mt-5 rounded-xl shadow-lg ${e?"w-full max-w-xs mx-auto flex flex-col items-center":""}`,style:{minWidth:e?220:void 0},children:[(0,a.jsx)("h2",{className:"text-base lg:text-xl text-center font-semibold text-gray-800 p-3",children:"Số kh\xe1ch tới chia theo loại"}),(0,a.jsx)("div",{className:"w-full flex justify-center",children:(0,a.jsx)(m.u,{width:"100%",height:e?180:350,minWidth:220,children:(0,a.jsxs)(u.b,{data:t,margin:{top:e?10:30,right:10,left:10,bottom:e?20:40},children:[(0,a.jsx)(g.d,{stroke:"#e5e7eb",strokeDasharray:"5 5"}),(0,a.jsx)(p.W,{dataKey:"date",stroke:"#6b7280",fontSize:e?10:12,tickLine:!1,axisLine:{stroke:"#d1d5db"},angle:e?-20:0,textAnchor:e?"end":"middle",height:e?40:60,tickFormatter:e=>{if(!e)return"";let t=String(e).match(/^\d{4}-(\d{2})-(\d{2})$/);if(t){let[,e,s]=t;return`${s}/${e}`}return String(e)}}),(0,a.jsx)(f.h,{stroke:"#6b7280",fontSize:e?10:12,tickLine:!1,axisLine:{stroke:"#d1d5db"},tickFormatter:e=>e>0?`${e} kh\xe1ch`:e,padding:{bottom:10,top:10}}),(0,a.jsx)(b.m,{}),(0,a.jsx)(j.s,{wrapperStyle:{paddingTop:e?"":"20px",fontSize:e?"10px":"14px",color:"#4b5563",display:"flex",flexDirection:e?"column":"row",alignItems:"center",justifyContent:"center",flexWrap:e?"nowrap":"wrap",width:"100%",maxHeight:e?80:void 0,overflowY:e?"auto":void 0},iconType:"circle",iconSize:e?8:10,verticalAlign:e?"bottom":void 0}),s.map((e,t)=>(0,a.jsx)(y.N,{type:"natural",dataKey:e,name:e,stroke:r[t%r.length],strokeWidth:2,dot:!1,activeDot:{r:6,fill:r[t%r.length],stroke:"#fff",strokeWidth:2},animationDuration:1500},e))]})})})]});var $=s(2041),T=s(515);let F=({isMobile:e,customerSourceTrendData:t,customerSourceKeys:s,COLORS:r})=>(0,a.jsxs)("div",{className:"w-full bg-white rounded-xl shadow-lg mt-5",children:[(0,a.jsx)("div",{className:"text-xl font-medium text-gray-700 text-center pt-5",children:"Nguồn của đơn h\xe0ng"}),(0,a.jsx)("div",{className:"w-full bg-white rounded-xl shadow-lg",children:(0,a.jsx)(m.u,{width:"100%",height:e?220:350,minWidth:e?180:320,children:(0,a.jsxs)($.E,{data:t,margin:{top:e?20:50,right:10,left:10,bottom:e?20:40},children:[(0,a.jsx)(g.d,{strokeDasharray:"3 3"}),(0,a.jsx)(p.W,{dataKey:"date",fontSize:e?9:12,tickFormatter:e=>{let t=e.match(/^\d{4}-(\d{2})-(\d{2})$/);if(t){let[,e,s]=t;return`${s}/${e}`}return e}}),(0,a.jsx)(f.h,{fontSize:e?9:12}),(0,a.jsx)(b.m,{}),(0,a.jsx)(j.s,{wrapperStyle:{paddingTop:5*!e,paddingBottom:10*!e,display:"flex",justifyContent:"center",flexWrap:"wrap",width:"100%",fontSize:e?9:14}}),s.map((l,n)=>(0,a.jsx)(T.y,{dataKey:l,fill:r[n%r.length],name:l,label:e?void 0:e=>{let{x:l,y:i,width:o,value:d,index:c}=e;if("number"!=typeof c||c<0||"number"!=typeof l||"number"!=typeof i||"number"!=typeof o)return(0,a.jsx)("g",{});let x=t[c];return x&&d===Math.max(...s.map(e=>Number(x[e]||0)))&&d>0?(0,a.jsx)("text",{x:l+o/2,y:i-5,textAnchor:"middle",fill:r[n%r.length],fontSize:14,fontWeight:600,children:d}):(0,a.jsx)("g",{})}},l))]})})})]}),D=({isMobile:e,loading:t,error:s,sortedAppDownloadStatusData:r})=>(0,a.jsxs)("div",{className:"w-full bg-white rounded-xl shadow-lg mt-4 lg:mt-5",children:[(0,a.jsx)("div",{className:"text-lg lg:text-xl font-medium text-gray-700 text-center pt-6 lg:pt-10",children:"Kh\xe1ch tải app/kh\xf4ng tải"}),(0,a.jsx)("div",{className:"flex justify-center items-center py-4 lg:py-8",children:t?(0,a.jsx)("div",{children:"Đang tải dữ liệu..."}):s?(0,a.jsx)("div",{className:"text-red-500",children:s}):(0,a.jsx)(m.u,{width:"100%",height:e?220:300,minWidth:e?180:320,children:(0,a.jsxs)($.E,{data:r,children:[(0,a.jsx)(g.d,{strokeDasharray:"3 3"}),(0,a.jsx)(p.W,{dataKey:"date",fontSize:e?9:12,tickFormatter:e=>{if(!e)return"";let t=String(e).match(/^(\d{4})-(\d{2})-(\d{2})/);if(t){let[,,e,s]=t;return`${s}/${e}`}let s=String(e).match(/^(\d{2})\/(\d{2})(?:\/\d{4})?$/);return s?`${s[1]}/${s[2]}`:"string"==typeof e&&e.length>=10?e.slice(8,10)+"/"+e.slice(5,7):e}}),(0,a.jsx)(f.h,{allowDecimals:!1,fontSize:e?9:12}),(0,a.jsx)(b.m,{}),(0,a.jsx)(j.s,{fontSize:e?9:12}),(0,a.jsx)(T.y,{dataKey:"downloaded",fill:"#9ee347",name:"Đ\xe3 tải app",label:e?void 0:{position:"top",fontSize:14,fontWeight:600,fill:"#9ee347"}}),(0,a.jsx)(T.y,{dataKey:"notDownloaded",fill:"#f0bf4c",name:"Chưa tải app",label:e?void 0:{position:"top",fontSize:14,fontWeight:600,fill:"#f0bf4c"}})]})})})]}),E=["#ff7f7f","#b39ddb","#8d6e63","#c5e1a5","#81d4fa","#f0bf4c","#bccefb","#a9b8c3"],R=({appDownloadPieData:e,loadingAppDownload:t,errorAppDownload:s})=>{let[r,n]=l().useState(!1);return l().useEffect(()=>{let e=()=>{n(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.jsxs)("div",{className:"w-full bg-white rounded-xl shadow-lg mt-5 p-2 sm:p-4",children:[(0,a.jsx)("div",{className:"text-sm sm:text-base md:text-xl font-medium text-gray-700 text-center mb-4",children:"Tỷ lệ tải app"}),(0,a.jsx)("div",{className:"w-full overflow-x-auto",children:t?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"text-gray-500",children:"Đang tải dữ liệu..."})}):s?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"text-red-500",children:s})}):(0,a.jsx)(m.u,{width:"100%",height:r?300:400,minWidth:280,children:(0,a.jsxs)(v.r,{children:[(0,a.jsx)(w.F,{data:e,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:r?"25%":"30%",outerRadius:r?"50%":"60%",label:({percent:e})=>e&&e>.05?`${(100*e).toFixed(0)}%`:"",labelLine:!1,children:e.map((e,t)=>(0,a.jsx)(N.f,{fill:E[t%E.length]},e.name))}),(0,a.jsx)(b.m,{formatter:e=>[e.toLocaleString(),"Số lượng"],contentStyle:{fontSize:r?12:14,backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #ccc",borderRadius:"4px",padding:"8px"}}),(0,a.jsx)(j.s,{wrapperStyle:{fontSize:r?10:12,paddingTop:r?10:20,display:"flex",justifyContent:"center",flexWrap:"wrap",width:"100%"},layout:"horizontal",verticalAlign:"bottom",align:"center"})]})})})]})},M=({isMobile:e,paymentPercentNewPieData:t,paymentPercentOldPieData:s})=>(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-2",children:[(0,a.jsxs)("div",{className:"w-full bg-white rounded-xl shadow-lg mt-4 lg:mt-5",children:[(0,a.jsx)("div",{className:"text-lg lg:text-xl font-medium text-gray-700 text-center pt-6 lg:pt-10",children:"Tỉ lệ c\xe1c h\xecnh thức thanh to\xe1n ( kh\xe1ch mới )"}),(0,a.jsx)("div",{className:"flex justify-center items-center 18 lg:py-8",children:(0,a.jsx)(m.u,{width:"100%",height:e?220:300,minWidth:e?180:320,children:(0,a.jsxs)(v.r,{children:[(0,a.jsx)(w.F,{data:t,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:"30%",outerRadius:"60%",label:e?e=>{let{percent:s,x:r,y:l,index:n}=e;if(!s||s<=0||"number"!=typeof n||n<0)return null;let i=t[n]?.color||"#333";return(0,a.jsx)("text",{x:r,y:l,textAnchor:"middle",dominantBaseline:"central",fontSize:10,fontWeight:600,fill:i,children:`${(100*s).toFixed(1)}%`})}:e=>{let{percent:s,x:r,y:l,index:n}=e;if(!s||s<=0||"number"!=typeof n||n<0)return null;let i=t[n]?.color||"#333";return(0,a.jsx)("text",{x:r,y:l,textAnchor:"middle",dominantBaseline:"central",fontSize:14,fontWeight:600,fill:i,children:`${(100*s).toFixed(1)}%`})},labelLine:!1,children:t.map(e=>(0,a.jsx)(N.f,{fill:e.color},e.name))}),(0,a.jsx)(b.m,{formatter:(e,t,s)=>`${Number(e).toLocaleString()} (${s.payload.percent?.toFixed(2)}%)`}),(0,a.jsx)(j.s,{wrapperStyle:{paddingTop:10,paddingBottom:10,display:"flex",justifyContent:"center",flexWrap:"wrap",width:"100%",fontSize:e?9:12},layout:"horizontal",verticalAlign:"bottom",align:"center"})]})})})]}),(0,a.jsxs)("div",{className:"w-full bg-white rounded-xl shadow-lg mt-4 lg:mt-5",children:[(0,a.jsx)("div",{className:"text-lg lg:text-xl font-medium text-gray-700 text-center pt-6 lg:pt-10",children:"Tỉ lệ c\xe1c h\xecnh thức thanh to\xe1n ( kh\xe1ch cũ )"}),(0,a.jsx)("div",{className:"flex justify-center items-center py-4 lg:py-8",children:(0,a.jsx)(m.u,{width:"100%",height:300,children:(0,a.jsxs)(v.r,{children:[(0,a.jsx)(w.F,{data:s,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:"30%",outerRadius:"60%",label:e?e=>{let{percent:t,x:r,y:l,index:n}=e;if(!t||t<=0||"number"!=typeof n||n<0)return null;let i=s[n]?.color||"#333";return(0,a.jsx)("text",{x:r,y:l,textAnchor:"middle",dominantBaseline:"central",fontSize:10,fontWeight:600,fill:i,children:`${(100*t).toFixed(1)}%`})}:e=>{let{percent:t,x:r,y:l,index:n}=e;if(!t||t<=0||"number"!=typeof n||n<0)return null;let i=s[n]?.color||"#333";return(0,a.jsx)("text",{x:r,y:l,textAnchor:"middle",dominantBaseline:"central",fontSize:14,fontWeight:600,fill:i,children:`${(100*t).toFixed(1)}%`})},labelLine:!1,children:s.map(e=>(0,a.jsx)(N.f,{fill:e.color},e.name))}),(0,a.jsx)(b.m,{}),(0,a.jsx)(j.s,{wrapperStyle:{paddingTop:10,paddingBottom:10,display:"flex",justifyContent:"center",flexWrap:"wrap",width:"100%",fontSize:e?9:12},layout:"horizontal",verticalAlign:"bottom",align:"center"})]})})})]})]});var z=s(13193),W=s(70212),A=s(34276);let K="https://338bc771545b.ngrok-free.app";function B(e,t,s){let[a,l]=(0,r.useState)(null),[n,i]=(0,r.useState)(!0),[o,d]=(0,r.useState)(null);return{data:a,loading:n,error:o}}function P(){let{notification:e,showSuccess:t,showError:s,hideNotification:x}=(0,z.h)();(0,r.useRef)(!1),(0,r.useRef)(!1);let{reportPageError:m,reportDataLoadSuccess:u,reportFilterChange:g,reportResetFilters:p,reportPagePerformance:f}=(0,A.n)("customers"),[b]=(0,r.useState)([]),[j,y]=(0,W.V)("customer-selectedType",[]),[v,w]=(0,W.V)("customer-selectedStatus",null),[N,$]=(0,r.useState)(!1),[T,E]=(0,r.useState)(!1),[P,L]=(0,W.V)("customer-startDate",(0,n.Ec)((0,n.Xj)()).subtract({days:7})),[_,U]=(0,W.V)("customer-endDate",(0,n.Ec)((0,n.Xj)())),[O,H]=(0,W.V)("customer-selectedRegions",[]),[V,G]=(0,r.useState)(!1),[q,I]=(0,W.V)("customer-selectedBranches",[]),[X,Y]=(0,r.useState)(!1),Q=["#5bd1d7","#eb94cf","#f66035","#00d084","#9b51e0","#0693e3","#ff7f7f","#b39ddb","#8d6e63","#c5e1a5","#81d4fa","#fff176","#d81b60"],Z=P?`${P.year}-${String(P.month).padStart(2,"0")}-${String(P.day).padStart(2,"0")}T00:00:00`:"",J=_?`${_.year}-${String(_.month).padStart(2,"0")}-${String(_.day).padStart(2,"0")}T23:59:59`:"",{data:ee,loading:et,error:es}=B(`${K}/api/customer-sale/new-customer-lineChart`,Z,J),{data:ea,loading:er,error:el}=B(`${K}/api/customer-sale/gender-ratio`,Z,J),{data:en}=B(`${K}/api/customer-sale/customer-type-trend`,Z,J),{data:ei}=B(`${K}/api/customer-sale/customer-source-trend`,Z,J),{data:eo,loading:ed,error:ec}=B(`${K}/api/customer-sale/app-download-status`,Z,J),{data:ex,loading:eh,error:em}=B(`${K}/api/customer-sale/app-download-pieChart`,Z,J),{data:eu,loading:eg,error:ep}=B(`${K}/api/customer-sale/customer-summary`,Z,J),{data:ef,loading:eb,error:ej}=B(`${K}/api/customer-sale/gender-revenue`,Z,J),{data:ey}=B(`${K}/api/customer-sale/payment-percent-new`,Z,J),{data:ev}=B(`${K}/api/customer-sale/payment-percent-old`,Z,J),{data:ew}=B(`${K}/api/customer-sale/unique-customers-comparison`,Z,J),{data:eN,loading:eS,error:ek}=B(`${K}/api/customer-sale/facility-hour-service`,Z,J),eC=[es,el,ec,em,ep,ej,ek];[et,er,ed,eh,eg,eb,eS].some(e=>e),eC.some(e=>e);let e$=l().useMemo(()=>{if(!ee)return[];let e=Array.isArray(ee.currentRange)?ee.currentRange:[],t=Array.isArray(ee.previousRange)?ee.previousRange:[];return e.map((e,s)=>({date:e.date||"",value:e.count,value2:t[s]?.count??0}))},[ee]),eT=l().useMemo(()=>ea?[{gender:"Nam",count:ea.male||0},{gender:"Nữ",count:ea.female||0}]:[],[ea]),eF=l().useMemo(()=>{if(!en)return[];let e=new Set;Object.values(en).forEach(t=>{t.forEach(t=>{e.add(t.date.slice(0,10))})});let t=Array.from(e).sort(),s=Object.keys(en);return t.map(e=>{let t={date:String(e)};return s.forEach(s=>{let a=en[s].find(t=>t.date.slice(0,10)===e);t[s]=a?a.count:0}),t})},[en]),eD=l().useMemo(()=>{if(!ei)return[];let e=new Set;Object.values(ei).forEach(t=>{t.forEach(t=>{e.add(t.date.slice(0,10))})});let t=Array.from(e).sort(),s=Object.keys(ei);return t.map(e=>{let t={date:String(e)};return s.forEach(s=>{let a=ei[s].find(t=>t.date.slice(0,10)===e);t[s]=a?a.count:0}),t})},[ei]),eE=l().useMemo(()=>eo?Object.values(eo).flat():[],[eo]),eR=l().useMemo(()=>ex?[{name:"Đ\xe3 tải app",value:ex.totalNew||0},{name:"Chưa tải app",value:ex.totalOld||0}]:[],[ex]),eM=l().useMemo(()=>ey?[{name:"TM+CK+QT",value:(ey.totalCash||0)+(ey.totalTransfer||0)+(ey.totalPrepaidCard||0),color:"#f66035"},{name:"TIỀN MẶT",value:ey.totalCash||0,color:"#00d084"},{name:"CHUYỂN KHOẢN",value:ey.totalTransfer||0,color:"#5bd1d7"},{name:"C\xd2N NỢ",value:ey.totalDebt||0,color:"#eb94cf"}]:[],[ey]),ez=[...Array.isArray(b)?b:[]],eW=["NG\xc0Y TẠO","M\xc3 ĐƠN H\xc0NG","T\xcaN KH\xc1CH H\xc0NG","SỐ ĐIỆN THOẠI","NH\xd3M KH\xc1CH H\xc0NG"],eA=ez.filter(e=>{let t=e["Unnamed: 1"]||e["Unnamed: 3"]||"";if(eW.includes(String(t).trim().toUpperCase()))return!1;let s=eU(String(t));return s.compare(P)>=0&&0>=s.compare(_)}),eK=new Set;eA.forEach(e=>{let t=e["Unnamed: 4"]?.toString().trim();t&&eK.add(t)});let eB=new Set;Array.isArray(b)&&b.forEach(e=>{let t=e["Unnamed: 3"]?.toString().trim();t&&eK.has(t)&&eB.add(t)});let eP=new Set;ez.forEach(e=>{let t=e["Unnamed: 1"]||e["Unnamed: 3"]||"";if(eW.includes(String(t).trim().toUpperCase()))return;let s=eU(String(t)),a=e["Unnamed: 4"]?.toString().trim();a&&0>s.compare(P)&&eP.add(a)});let eL=new Set,e_=new Set;function eU(e){if(!e||"string"!=typeof e)return(0,n.Ec)((0,n.Xj)());let t=e.match(/^\d{1,2}:\d{2} (\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(t||(t=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/))){let[,e,s,a]=t;return(0,i._U)(`${a}-${s.padStart(2,"0")}-${e.padStart(2,"0")}`)}return(0,n.Ec)((0,n.Xj)())}eA.forEach(e=>{let t=e["Unnamed: 4"]?.toString().trim();t&&(eP.has(t)||eL.has(t)||(e_.add(t),eL.add(t)))});let eO=new Set;eA.forEach(e=>{let t=e["Unnamed: 4"]?.toString().trim();t&&(eP.has(t)||eO.has(t)||eO.add(t))});let eH=640>function(){let[e,t]=(0,r.useState)(1024);return e}(),eV=l().useMemo(()=>ev?[{name:"TM+CK+QT",value:(ev.totalCash||0)+(ev.totalTransfer||0)+(ev.totalPrepaidCard||0),color:"#f66035"},{name:"TIỀN MẶT",value:ev.totalCash||0,color:"#00d084"},{name:"CHUYỂN KHOẢN",value:ev.totalTransfer||0,color:"#5bd1d7"},{name:"C\xd2N NỢ",value:ev.totalDebt||0,color:"#eb94cf"}]:[],[ev]),eG=l().useMemo(()=>{if(!eN)return[];let e=new Set;return eN.forEach(t=>{Object.keys(t.hourlyCounts).forEach(t=>e.add(t))}),Array.from(e).sort((e,t)=>{let s=e=>parseInt(e.split("-")[0],10);return s(e)-s(t)})},[eN]),eq=l().useMemo(()=>eN?eN.map(e=>({facility:e.facility,...e.hourlyCounts,total:e.total})).sort((e,t)=>t.total-e.total):[],[eN]),eI=eF.length>0?Object.keys(eF[0]).filter(e=>"date"!==e):[],eX=l().useMemo(()=>0===eD.length?[]:Object.keys(eD[0]).filter(e=>"date"!==e),[eD]),eY=l().useMemo(()=>{let e={};return eG.forEach(t=>{let s=Math.max(...eq.map(e=>Number(e[t]??0)));e[t]=s}),e},[eq,eG]),eQ=l().useMemo(()=>eE?[...eE].sort((e,t)=>{let s=e=>{if(!e.date)return 0;let t=String(e.date).match(/^(\d{4})-(\d{2})-(\d{2})/);if(t)return new Date(`${t[1]}-${t[2]}-${t[3]}`).getTime();let s=String(e.date).match(/^(\d{2})\/(\d{2})\/(\d{4})$/);return s?new Date(`${s[3]}-${s[2]}-${s[1]}`).getTime():new Date(e.date).getTime()};return s(e)-s(t)}):[],[eE]);return(0,a.jsxs)("div",{className:"p-2 sm:p-4 md:p-6 max-w-full",children:[(0,a.jsx)(z.E,{type:e.type,message:e.message,isVisible:e.isVisible,onClose:x}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("h1",{className:"text-xl lg:text-2xl font-semibold text-gray-900",children:"Customer Report"}),(0,a.jsx)("button",{onClick:()=>{(0,W.e)(["customer-selectedType","customer-selectedStatus","customer-startDate","customer-endDate","customer-selectedRegions","customer-selectedBranches"]),y([]),w(null),L((0,n.Ec)((0,n.Xj)()).subtract({days:7})),U((0,n.Ec)((0,n.Xj)())),H([]),I([]),t("Đ\xe3 reset tất cả filter về mặc định!"),p()},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm",children:"Reset Filters"})]}),(0,a.jsx)(d,{startDate:P,endDate:_,setStartDate:L,setEndDate:U,today:n.Ec,getLocalTimeZone:n.Xj,parseDate:i._U,selectedType:j,setSelectedType:y,showTypeDropdown:N,setShowTypeDropdown:$,customerTypes:["KH trải nghiệm","Kh\xe1ch h\xe0ng Th\xe0nh vi\xean","Kh\xe1ch h\xe0ng Bạc","Kh\xe1ch h\xe0ng V\xe0ng","Kh\xe1ch h\xe0ng Bạch Kim","Kh\xe1ch h\xe0ng Kim cương"],selectedStatus:v,setSelectedStatus:w,showStatusDropdown:T,setShowStatusDropdown:E,customerStatus:["New","Old"],selectedRegions:O,setSelectedRegions:H,showRegionDropdown:V,setShowRegionDropdown:G,allRegions:["Đ\xe3 đ\xf3ng cửa","Đ\xe0 Nẵng","Nha Trang","H\xe0 Nội","HCM"],selectedBranches:q,setSelectedBranches:I,showBranchDropdown:X,setShowBranchDropdown:Y,allBranches:["Branch 1","Branch 2","Branch 3"]}),(0,a.jsx)(c,{value:ew?.current?.toLocaleString()??0,label:"Tổng số kh\xe1ch trong khoảng ng\xe0y đ\xe3 chọn",percentChange:ew?.changePercent}),(0,a.jsx)(h,{loading:eb,error:ej,avgRevenueMale:ef?.avgRevenueMale?.toLocaleString()??0,avgRevenueFemale:ef?.avgRevenueFemale?.toLocaleString()??0,avgServiceMale:ef?.avgServiceMale?.toLocaleString()??0,avgServiceFemale:ef?.avgServiceFemale?.toLocaleString()??0}),(0,a.jsx)(S,{isMobile:eH,loadingNewCustomer:et,errorNewCustomer:es,newCustomerChartData:e$,loadingGenderRatio:er,errorGenderRatio:el,genderRatioData:eT,COLORS:Q}),(0,a.jsx)(k,{loadingCustomerSummary:eg,errorCustomerSummary:ep,customerSummaryRaw:eu}),(0,a.jsx)(C,{isMobile:eH,customerTypeTrendData:eF,customerTypeKeys:eI,COLORS:Q}),(0,a.jsx)(F,{isMobile:eH,customerSourceTrendData:eD,customerSourceKeys:eX,COLORS:Q}),(0,a.jsx)(D,{isMobile:eH,loading:ed,error:ec,sortedAppDownloadStatusData:eQ}),(0,a.jsx)(R,{loadingAppDownload:eh,errorAppDownload:em,appDownloadPieData:eR}),(0,a.jsx)(M,{isMobile:eH,paymentPercentNewPieData:eM,paymentPercentOldPieData:eV}),(0,a.jsx)(o,{allHourRanges:eG,facilityHourTableData:eq,getCellBg:function(e,t){let s=eY[t]||0;if(!s||0===s||0===e)return"";let a=e/s;return a>=.9?"bg-[#68B2A0]":a>=.7?"bg-[#CDE0C9]":a>=.5?"bg-[#E0ECDE]":a>=.3?"bg-[#F0F8F0]":a>=.1?"bg-[#F8FCF8]":""},isMobile:eH,loadingFacilityHour:eS,errorFacilityHour:ek})]})})]})}},79551:e=>{"use strict";e.exports=require("url")},89715:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(37413);function r(){return(0,a.jsx)("div",{className:"p-4 lg:p-6",children:(0,a.jsx)("div",{className:"mb-4 lg:mb-6",children:(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)("h1",{className:"text-xl lg:text-2xl font-semibold text-gray-900 mb-2",children:"Customer Report"}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-4",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32"}),(0,a.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32"}),(0,a.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32"}),(0,a.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-4",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-2"}),(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[1,2,3,4].map(e=>(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-4",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/2"})]})},e))}),[1,2,3,4,5,6].map(e=>(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-4",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-5 bg-gray-200 rounded w-1/3 mb-4"}),(0,a.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})},e)),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-4",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-5 bg-gray-200 rounded w-1/4 mb-4"}),(0,a.jsx)("div",{className:"space-y-2",children:[1,2,3,4,5].map(e=>(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded"},e))})]})})]})})})}s(61120)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[383,397,203,447,685,650,761,446,704],()=>s(15249));module.exports=a})();