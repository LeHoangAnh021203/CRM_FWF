(()=>{var e={};e.id=9450,e.ids=[9450],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5074:(e,t,a)=>{Promise.resolve().then(a.bind(a,73642))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15831:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>F});var r=a(60687),n=a(43210),s=a.n(n),o=a(67763),l=a(7562),i=a(11763),d=a(48482),c=a(56651),m=a(56988),u=a(25679),h=a(23812),p=a(15202);let g=({isMobile:e,paymentPercentNewPieData:t,paymentPercentOldPieData:a})=>(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-2",children:[(0,r.jsxs)("div",{className:"w-full bg-white rounded-xl shadow-lg mt-4 lg:mt-5",children:[(0,r.jsx)("div",{className:"text-lg lg:text-xl font-medium text-gray-700 text-center pt-6 lg:pt-10",children:"Tỉ lệ c\xe1c h\xecnh thức thanh to\xe1n ( kh\xe1ch mới )"}),(0,r.jsx)("div",{className:"flex justify-center items-center 18 lg:py-8",children:(0,r.jsx)(d.u,{width:"100%",height:e?220:300,minWidth:e?180:320,children:(0,r.jsxs)(c.r,{children:[(0,r.jsx)(m.F,{data:t,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:"30%",outerRadius:"60%",label:e?e=>{let{percent:a,x:n,y:s,index:o}=e;if(!a||a<=0||"number"!=typeof o||o<0)return null;let l=t[o]?.color||"#333";return(0,r.jsx)("text",{x:n,y:s,textAnchor:"middle",dominantBaseline:"central",fontSize:10,fontWeight:600,fill:l,children:`${(100*a).toFixed(1)}%`})}:e=>{let{percent:a,x:n,y:s,index:o}=e;if(!a||a<=0||"number"!=typeof o||o<0)return null;let l=t[o]?.color||"#333";return(0,r.jsx)("text",{x:n,y:s,textAnchor:"middle",dominantBaseline:"central",fontSize:14,fontWeight:600,fill:l,children:`${(100*a).toFixed(1)}%`})},labelLine:!1,children:t.map(e=>(0,r.jsx)(u.f,{fill:e.color},e.name))}),(0,r.jsx)(h.m,{formatter:(e,t,a)=>`${Number(e).toLocaleString()} (${a.payload.percent?.toFixed(2)}%)`}),(0,r.jsx)(p.s,{wrapperStyle:{paddingTop:10,paddingBottom:10,display:"flex",justifyContent:"center",flexWrap:"wrap",width:"100%",fontSize:e?9:12},layout:"horizontal",verticalAlign:"bottom",align:"center"})]})})})]}),(0,r.jsxs)("div",{className:"w-full bg-white rounded-xl shadow-lg mt-4 lg:mt-5",children:[(0,r.jsx)("div",{className:"text-lg lg:text-xl font-medium text-gray-700 text-center pt-6 lg:pt-10",children:"Tỉ lệ c\xe1c h\xecnh thức thanh to\xe1n ( kh\xe1ch cũ )"}),(0,r.jsx)("div",{className:"flex justify-center items-center py-4 lg:py-8",children:(0,r.jsx)(d.u,{width:"100%",height:300,children:(0,r.jsxs)(c.r,{children:[(0,r.jsx)(m.F,{data:a,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:"30%",outerRadius:"60%",label:e?e=>{let{percent:t,x:n,y:s,index:o}=e;if(!t||t<=0||"number"!=typeof o||o<0)return null;let l=a[o]?.color||"#333";return(0,r.jsx)("text",{x:n,y:s,textAnchor:"middle",dominantBaseline:"central",fontSize:10,fontWeight:600,fill:l,children:`${(100*t).toFixed(1)}%`})}:e=>{let{percent:t,x:n,y:s,index:o}=e;if(!t||t<=0||"number"!=typeof o||o<0)return null;let l=a[o]?.color||"#333";return(0,r.jsx)("text",{x:n,y:s,textAnchor:"middle",dominantBaseline:"central",fontSize:14,fontWeight:600,fill:l,children:`${(100*t).toFixed(1)}%`})},labelLine:!1,children:a.map(e=>(0,r.jsx)(u.f,{fill:e.color},e.name))}),(0,r.jsx)(h.m,{}),(0,r.jsx)(p.s,{wrapperStyle:{paddingTop:10,paddingBottom:10,display:"flex",justifyContent:"center",flexWrap:"wrap",width:"100%",fontSize:e?9:12},layout:"horizontal",verticalAlign:"bottom",align:"center"})]})})})]})]});var x=a(2041),f=a(85168),b=a(27747),y=a(19598),j=a(515),v=a(98845);function w({paymentRegionData:e,isMobile:t}){let a=s().useMemo(()=>{if(!e||0===e.length)return[{region:"Đang tải...",bank:0,cash:0,card:0,total:0},{region:"Đang tải...",bank:0,cash:0,card:0,total:0},{region:"Đang tải...",bank:0,cash:0,card:0,total:0},{region:"Đang tải...",bank:0,cash:0,card:0,total:0},{region:"Đang tải...",bank:0,cash:0,card:0,total:0}];let t=e.map(e=>({...e,total:(e.bank||0)+(e.cash||0)+(e.card||0)})).sort((e,t)=>e.total-t.total).slice(0,5);return console.log("Payment Region Data from API:",e),console.log("Bottom 5 Data:",t),t},[e]),n=s().useMemo(()=>{let e=new Map;return a.forEach(t=>{let a=[t.bank||0,t.cash||0,t.card||0];e.set(t.region,Math.max(...a))}),e},[a]);return(0,r.jsxs)("div",{className:"w-full bg-white rounded-xl shadow-lg mt-8 p-2 sm:p-4",children:[(0,r.jsx)("div",{className:"text-base sm:text-2xl font-semibold text-gray-800 mb-4",children:"H\xecnh thức thanh to\xe1n theo v\xf9ng"}),(0,r.jsx)("div",{className:"w-full overflow-x-auto",children:(0,r.jsx)(d.u,{width:"100%",height:t?250:350,minWidth:280,children:(0,r.jsxs)(x.E,{data:a,margin:{top:20,right:t?20:40,left:t?20:40,bottom:20},barCategoryGap:t?10:20,barGap:t?4:8,children:[(0,r.jsx)(f.d,{strokeDasharray:"3 3"}),(0,r.jsx)(b.W,{dataKey:"region",fontSize:t?10:12,angle:t?-45:0,textAnchor:t?"end":"middle",height:t?60:30}),(0,r.jsx)(y.h,{tickFormatter:e=>"number"==typeof e&&e>=1e6?(e/1e6).toFixed(1)+"M":"number"==typeof e?e.toLocaleString():e,fontSize:t?10:12,width:t?60:80}),(0,r.jsx)(h.m,{formatter:e=>"number"==typeof e?e>=1e6?`${(e/1e6).toFixed(1)}M`:e.toLocaleString():e,contentStyle:{fontSize:t?12:14,backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #ccc",borderRadius:"4px",padding:"8px"}}),(0,r.jsx)(p.s,{wrapperStyle:{fontSize:t?10:12,paddingTop:t?10:20}}),(0,r.jsx)(j.y,{dataKey:"bank",name:"Chuyển khoản",fill:"#795548",maxBarSize:t?40:50,children:(0,r.jsx)(v.Z,{dataKey:"bank",position:"top",formatter:e=>{if("number"==typeof e&&0===e)return"";if(t){let t=a.find(t=>t.bank===e);if(!t)return"";let r=n.get(t.region)||0;return"number"==typeof e&&e===r&&e>0?(e/1e6).toFixed(1)+"M":""}return"number"==typeof e&&e>0?(e/1e6).toFixed(1)+"M":""},fill:"#795548",fontSize:t?10:12})}),(0,r.jsx)(j.y,{dataKey:"cash",name:"Tiền mặt",fill:"#c5e1a5",maxBarSize:t?40:50,children:(0,r.jsx)(v.Z,{dataKey:"cash",position:"top",formatter:e=>{if("number"==typeof e&&0===e)return"";if(t){let t=a.find(t=>t.cash===e);if(!t)return"";let r=n.get(t.region)||0;return"number"==typeof e&&e===r&&e>0?(e/1e6).toFixed(1)+"M":""}return"number"==typeof e&&e>0?(e/1e6).toFixed(1)+"M":""},fill:"#c5e1a5",fontSize:t?10:12})}),(0,r.jsx)(j.y,{dataKey:"card",name:"Thẻ t\xedn dụng/Ghi nợ",fill:"#ff7f7f",maxBarSize:t?40:50,children:(0,r.jsx)(v.Z,{dataKey:"card",position:"top",formatter:e=>{if("number"==typeof e&&0===e)return"";if(t){let t=a.find(t=>t.card===e);if(!t)return"";let r=n.get(t.region)||0;return"number"==typeof e&&e===r&&e>0?(e/1e6).toFixed(1)+"M":""}return"number"==typeof e&&e>0?(e/1e6).toFixed(1)+"M":""},fill:"#ff7f7f",fontSize:t?10:12})})]})})})]})}var N=a(13193),S=a(70212),T=a(34276);let k="https://c68783755745.ngrok-free.app";function D(e,t,a){let[r,s]=(0,n.useState)(null),[o,l]=(0,n.useState)(!0),[i,d]=(0,n.useState)(null);return{data:r,loading:o,error:i}}function F(){let{notification:e,showSuccess:t,showError:a,hideNotification:d}=(0,N.h)();(0,n.useRef)(!1),(0,n.useRef)(!1);let{reportFilterChange:c,reportResetFilters:m}=(0,T.n)("accounting"),[u,h]=(0,S.V)("customer-selectedType",[]),[p,x]=(0,S.V)("customer-selectedStatus",null),[f,b]=(0,n.useState)(!1),[y,j]=(0,n.useState)(!1),[v,F]=(0,S.V)("customer-startDate",(0,o.Ec)((0,o.Xj)()).subtract({days:7})),[B,C]=(0,S.V)("customer-endDate",(0,o.Ec)((0,o.Xj)())),[P,R]=(0,S.V)("customer-selectedRegions",[]),[M,E]=(0,n.useState)(!1),[K,z]=(0,S.V)("customer-selectedBranches",[]),[$,_]=(0,n.useState)(!1),A=v?`${v.year}-${String(v.month).padStart(2,"0")}-${String(v.day).padStart(2,"0")}T00:00:00`:"",H=B?`${B.year}-${String(B.month).padStart(2,"0")}-${String(B.day).padStart(2,"0")}T23:59:59`:"",{data:G,loading:U,error:q}=D(`${k}/api/customer-sale/customer-summary`,A,H),{data:V}=D(`${k}/api/customer-sale/payment-percent-new`,A,H),{data:W}=D(`${k}/api/customer-sale/payment-percent-old`,A,H),{data:L,loading:X,error:O}=D(`${k}/api/sales/payment-by-region`,A,H);[U,X].some(e=>e),[q,O].some(e=>e);let I=s().useMemo(()=>V?[{name:"TIỀN MẶT",value:V.totalCash||0,color:"#00d084"},{name:"CHUYỂN KHOẢN",value:V.totalTransfer||0,color:"#5bd1d7"},{name:"THẺ T\xcdN DỤNG",value:V.totalCreditCard||0,color:"#ff7f7f"},{name:"THẺ TRẢ TRƯỚC",value:V.totalPrepaidCard||0,color:"#f66035"},{name:"C\xd2N NỢ",value:V.totalDebt||0,color:"#eb94cf"}].filter(e=>e.value>0):[],[V]),Z=s().useMemo(()=>W?[{name:"TIỀN MẶT",value:W.totalCash||0,color:"#00d084"},{name:"CHUYỂN KHOẢN",value:W.totalTransfer||0,color:"#5bd1d7"},{name:"THẺ T\xcdN DỤNG",value:W.totalCreditCard||0,color:"#ff7f7f"},{name:"THẺ TRẢ TRƯỚC",value:W.totalPrepaidCard||0,color:"#f66035"},{name:"C\xd2N NỢ",value:W.totalDebt||0,color:"#eb94cf"}].filter(e=>e.value>0):[],[W]),Y=s().useMemo(()=>L?L.map(e=>({region:e.region,bank:e.transfer||0,cash:e.cash||0,card:e.creditCard||0})).filter(e=>e.bank+e.cash+e.card>0):[],[L]),J=640>function(){let[e,t]=(0,n.useState)(1024);return e}();return(0,r.jsxs)("div",{className:"p-2 sm:p-4 md:p-6 max-w-full",children:[(0,r.jsx)(N.E,{type:e.type,message:e.message,isVisible:e.isVisible,onClose:d}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"p-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("h1",{className:"text-xl lg:text-2xl font-semibold text-gray-900",children:"Accounting Report"}),(0,r.jsx)("button",{onClick:()=>{(0,S.e)(["customer-selectedType","customer-selectedStatus","customer-startDate","customer-endDate","customer-selectedRegions","customer-selectedBranches"]),h([]),x(null),F((0,o.Ec)((0,o.Xj)()).subtract({days:7})),C((0,o.Ec)((0,o.Xj)())),R([]),z([]),t("Đ\xe3 reset tất cả filter về mặc định!"),m()},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm",children:"Reset Filters"})]}),(0,r.jsx)(i.A,{startDate:v,endDate:B,setStartDate:F,setEndDate:C,today:o.Ec,getLocalTimeZone:o.Xj,parseDate:l._U,selectedType:u,setSelectedType:h,showTypeDropdown:f,setShowTypeDropdown:b,customerTypes:["KH trải nghiệm","Kh\xe1ch h\xe0ng Th\xe0nh vi\xean","Kh\xe1ch h\xe0ng Bạc","Kh\xe1ch h\xe0ng V\xe0ng","Kh\xe1ch h\xe0ng Bạch Kim","Kh\xe1ch h\xe0ng Kim cương"],selectedStatus:p,setSelectedStatus:x,showStatusDropdown:y,setShowStatusDropdown:j,customerStatus:["New","Old"],selectedRegions:P,setSelectedRegions:R,showRegionDropdown:M,setShowRegionDropdown:E,allRegions:["Đ\xe3 đ\xf3ng cửa","Đ\xe0 Nẵng","Nha Trang","H\xe0 Nội","HCM"],selectedBranches:K,setSelectedBranches:z,showBranchDropdown:$,setShowBranchDropdown:_,allBranches:["Branch 1","Branch 2","Branch 3"]}),(0,r.jsx)(g,{isMobile:J,paymentPercentNewPieData:I,paymentPercentOldPieData:Z})]}),(0,r.jsx)(w,{paymentRegionData:Y,isMobile:J})]})]})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73642:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/lehoanganh/Documents/FB Network/FE/src/app/accounting/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/lehoanganh/Documents/FB Network/FE/src/app/accounting/page.tsx","default")},79551:e=>{"use strict";e.exports=require("url")},83011:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var r=a(37413);function n(){return(0,r.jsx)("div",{className:"p-4 lg:p-6",children:(0,r.jsx)("div",{className:"mb-4 lg:mb-6",children:(0,r.jsxs)("div",{className:"p-2",children:[(0,r.jsx)("h1",{className:"text-xl lg:text-2xl font-semibold text-gray-900 mb-2",children:"Customer Report"}),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-4",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32"}),(0,r.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32"}),(0,r.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32"}),(0,r.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32"})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-4",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-2"}),(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]})}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[1,2,3,4].map(e=>(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-4",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/2"})]})},e))}),[1,2,3,4,5,6].map(e=>(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-4",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-5 bg-gray-200 rounded w-1/3 mb-4"}),(0,r.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})},e)),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-4",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-5 bg-gray-200 rounded w-1/4 mb-4"}),(0,r.jsx)("div",{className:"space-y-2",children:[1,2,3,4,5].map(e=>(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded"},e))})]})})]})})})}a(61120)},84489:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=a(65239),n=a(48088),s=a(88170),o=a.n(s),l=a(30893),i={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);a.d(t,i);let d={children:["",{children:["accounting",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,73642)),"/Users/lehoanganh/Documents/FB Network/FE/src/app/accounting/page.tsx"]}]},{loading:[()=>Promise.resolve().then(a.bind(a,83011)),"/Users/lehoanganh/Documents/FB Network/FE/src/app/accounting/loading.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,94431)),"/Users/lehoanganh/Documents/FB Network/FE/src/app/layout.tsx"],loading:[()=>Promise.resolve().then(a.bind(a,67393)),"/Users/lehoanganh/Documents/FB Network/FE/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,54413)),"/Users/lehoanganh/Documents/FB Network/FE/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/lehoanganh/Documents/FB Network/FE/src/app/accounting/page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/accounting/page",pathname:"/accounting",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},94458:(e,t,a)=>{Promise.resolve().then(a.bind(a,15831))}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[4447,2383,3397,7203,4587,9761,3650,6888,8829],()=>a(84489));module.exports=r})();