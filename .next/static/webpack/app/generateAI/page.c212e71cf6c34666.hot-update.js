"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/generateAI/page",{

/***/ "(app-pages-browser)/./src/lib/ai-service.ts":
/*!*******************************!*\
  !*** ./src/lib/ai-service.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   aiService: () => (/* binding */ aiService)\n/* harmony export */ });\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n// AI Service - Automatic Configuration\nclass AIService {\n    loadConfig() {\n        // Load from environment variables automatically\n        const stabilityKey = \"sk-EbyLFvWn0wKLaQ2WjszoOB6uEhYsfdOHHgCHqxMTjKjHzbsp\";\n        const replicateKey = process.env.NEXT_PUBLIC_REPLICATE_API_KEY;\n        const openaiKey = process.env.NEXT_PUBLIC_OPENAI_API_KEY;\n        // Priority: Stability AI > Replicate > OpenAI > Demo\n        if (stabilityKey) {\n            return {\n                service: 'stability',\n                apiKey: stabilityKey,\n                endpoint: 'https://api.stability.ai/v1/generation/stable-diffusion-xl-1024-v1-0/image-to-image',\n                isConfigured: true\n            };\n        } else if (replicateKey) {\n            return {\n                service: 'replicate',\n                apiKey: replicateKey,\n                endpoint: 'https://api.replicate.com/v1/predictions',\n                isConfigured: true\n            };\n        } else if (openaiKey) {\n            return {\n                service: 'openai',\n                apiKey: openaiKey,\n                endpoint: 'https://api.openai.com/v1/images/generations',\n                isConfigured: true\n            };\n        }\n        // Fallback to demo mode\n        return {\n            service: 'demo',\n            apiKey: '',\n            endpoint: '',\n            isConfigured: false\n        };\n    }\n    async generateFoxPerson(imageBlob, prompt, strength) {\n        try {\n            if (!this.config.isConfigured) {\n                throw new Error('No AI service configured');\n            }\n            console.log(\"Using \".concat(this.config.service, \" service\"));\n            switch(this.config.service){\n                case 'stability':\n                    return await this.generateWithStability(imageBlob, prompt, strength);\n                case 'replicate':\n                    return await this.generateWithReplicate(imageBlob, prompt, strength);\n                case 'openai':\n                    return await this.generateWithOpenAI(imageBlob, prompt, strength);\n                default:\n                    throw new Error('Unsupported service');\n            }\n        } catch (error) {\n            console.error('AI generation error:', error);\n            throw error;\n        }\n    }\n    async generateWithStability(imageBlob, prompt, strength) {\n        const formData = new FormData();\n        formData.append('init_image', imageBlob, 'input.jpg');\n        const enhancedPrompt = \"Transform this person into a beautiful fox person: \".concat(prompt, \", anthropomorphic fox, detailed orange fur, pointy fox ears, bushy fox tail, human-like body, high quality, detailed, professional photography\");\n        formData.append('text_prompts[0][text]', enhancedPrompt);\n        formData.append('text_prompts[0][weight]', '1');\n        formData.append('text_prompts[1][text]', 'low quality, blurry, distorted, bad anatomy, deformed, ugly, bad proportions');\n        formData.append('text_prompts[1][weight]', '-1');\n        formData.append('cfg_scale', '7.5');\n        formData.append('steps', '30');\n        formData.append('samples', '1');\n        formData.append('style_preset', 'photographic');\n        const response = await fetch(this.config.endpoint, {\n            method: 'POST',\n            headers: {\n                'Authorization': \"Bearer \".concat(this.config.apiKey),\n                'Accept': 'application/json'\n            },\n            body: formData\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            throw new Error(\"Stability AI failed: \".concat(response.status, \" - \").concat(errorText));\n        }\n        const result = await response.json();\n        if (result.artifacts && result.artifacts.length > 0) {\n            return \"data:image/png;base64,\".concat(result.artifacts[0].base64);\n        } else {\n            throw new Error('No image generated');\n        }\n    }\n    async generateWithReplicate(imageBlob, prompt, strength) {\n        // Convert blob to base64\n        const base64 = await this.blobToBase64(imageBlob);\n        const response = await fetch(this.config.endpoint, {\n            method: 'POST',\n            headers: {\n                'Authorization': \"Token \".concat(this.config.apiKey),\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                version: \"39ed52f2a78e934b3ba6e2a89f5b1c712de7dfea535525255b1aa35c5565e08b\",\n                input: {\n                    image: base64,\n                    prompt: \"fox person: \".concat(prompt),\n                    strength: strength\n                }\n            })\n        });\n        if (!response.ok) {\n            throw new Error(\"Replicate failed: \".concat(response.status));\n        }\n        const result = await response.json();\n        return result.output[0]; // Replicate returns image URLs\n    }\n    async generateWithOpenAI(imageBlob, prompt, strength) {\n        const response = await fetch(this.config.endpoint, {\n            method: 'POST',\n            headers: {\n                'Authorization': \"Bearer \".concat(this.config.apiKey),\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                model: \"dall-e-3\",\n                prompt: \"Transform this person into a fox person with strength \".concat(strength, \": \").concat(prompt),\n                n: 1,\n                size: \"1024x1024\"\n            })\n        });\n        if (!response.ok) {\n            throw new Error(\"OpenAI failed: \".concat(response.status));\n        }\n        const result = await response.json();\n        return result.data[0].url; // OpenAI returns image URLs\n    }\n    blobToBase64(blob) {\n        return new Promise((resolve, reject)=>{\n            const reader = new FileReader();\n            reader.onload = ()=>{\n                const result = reader.result;\n                resolve(result.split(',')[1]); // Remove data:image/...;base64, prefix\n            };\n            reader.onerror = reject;\n            reader.readAsDataURL(blob);\n        });\n    }\n    isConfigured() {\n        return this.config.isConfigured;\n    }\n    getServiceName() {\n        return this.config.service;\n    }\n    constructor(){\n        this.config = this.loadConfig();\n    }\n}\n// Export singleton instance\nconst aiService = new AIService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvYWktc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLHVDQUF1QztBQVF2QyxNQUFNQTtJQU9JQyxhQUE4QjtRQUNwQyxnREFBZ0Q7UUFDaEQsTUFBTUMsZUFBZUMscURBQXlDO1FBQzlELE1BQU1HLGVBQWVILE9BQU9BLENBQUNDLEdBQUcsQ0FBQ0csNkJBQTZCO1FBQzlELE1BQU1DLFlBQVlMLE9BQU9BLENBQUNDLEdBQUcsQ0FBQ0ssMEJBQTBCO1FBRXhELHFEQUFxRDtRQUNyRCxJQUFJUCxjQUFjO1lBQ2hCLE9BQU87Z0JBQ0xRLFNBQVM7Z0JBQ1RDLFFBQVFUO2dCQUNSVSxVQUFVO2dCQUNWQyxjQUFjO1lBQ2hCO1FBQ0YsT0FBTyxJQUFJUCxjQUFjO1lBQ3ZCLE9BQU87Z0JBQ0xJLFNBQVM7Z0JBQ1RDLFFBQVFMO2dCQUNSTSxVQUFVO2dCQUNWQyxjQUFjO1lBQ2hCO1FBQ0YsT0FBTyxJQUFJTCxXQUFXO1lBQ3BCLE9BQU87Z0JBQ0xFLFNBQVM7Z0JBQ1RDLFFBQVFIO2dCQUNSSSxVQUFVO2dCQUNWQyxjQUFjO1lBQ2hCO1FBQ0Y7UUFFQSx3QkFBd0I7UUFDeEIsT0FBTztZQUNMSCxTQUFTO1lBQ1RDLFFBQVE7WUFDUkMsVUFBVTtZQUNWQyxjQUFjO1FBQ2hCO0lBQ0Y7SUFFQSxNQUFhQyxrQkFBa0JDLFNBQWUsRUFBRUMsTUFBYyxFQUFFQyxRQUFnQixFQUFtQjtRQUNqRyxJQUFJO1lBQ0YsSUFBSSxDQUFDLElBQUksQ0FBQ0MsTUFBTSxDQUFDTCxZQUFZLEVBQUU7Z0JBQzdCLE1BQU0sSUFBSU0sTUFBTTtZQUNsQjtZQUVBQyxRQUFRQyxHQUFHLENBQUMsU0FBNkIsT0FBcEIsSUFBSSxDQUFDSCxNQUFNLENBQUNSLE9BQU8sRUFBQztZQUV6QyxPQUFRLElBQUksQ0FBQ1EsTUFBTSxDQUFDUixPQUFPO2dCQUN6QixLQUFLO29CQUNILE9BQU8sTUFBTSxJQUFJLENBQUNZLHFCQUFxQixDQUFD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cmNlcyI6WyIvVXNlcnMvbGVob2FuZ2FuaC9Eb2N1bWVudHMvRkIgTmV0d29yay9GRS9zcmMvbGliL2FpLXNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQUkgU2VydmljZSAtIEF1dG9tYXRpYyBDb25maWd1cmF0aW9uXG5leHBvcnQgaW50ZXJmYWNlIEFJU2VydmljZUNvbmZpZyB7XG4gIHNlcnZpY2U6ICdzdGFiaWxpdHknIHwgJ3JlcGxpY2F0ZScgfCAnb3BlbmFpJyB8ICdkZW1vJztcbiAgYXBpS2V5OiBzdHJpbmc7XG4gIGVuZHBvaW50OiBzdHJpbmc7XG4gIGlzQ29uZmlndXJlZDogYm9vbGVhbjtcbn1cblxuY2xhc3MgQUlTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBjb25maWc6IEFJU2VydmljZUNvbmZpZztcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbmZpZyA9IHRoaXMubG9hZENvbmZpZygpO1xuICB9XG5cbiAgcHJpdmF0ZSBsb2FkQ29uZmlnKCk6IEFJU2VydmljZUNvbmZpZyB7XG4gICAgLy8gTG9hZCBmcm9tIGVudmlyb25tZW50IHZhcmlhYmxlcyBhdXRvbWF0aWNhbGx5XG4gICAgY29uc3Qgc3RhYmlsaXR5S2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1RBQklMSVRZX0FQSV9LRVk7XG4gICAgY29uc3QgcmVwbGljYXRlS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfUkVQTElDQVRFX0FQSV9LRVk7XG4gICAgY29uc3Qgb3BlbmFpS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfT1BFTkFJX0FQSV9LRVk7XG5cbiAgICAvLyBQcmlvcml0eTogU3RhYmlsaXR5IEFJID4gUmVwbGljYXRlID4gT3BlbkFJID4gRGVtb1xuICAgIGlmIChzdGFiaWxpdHlLZXkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNlcnZpY2U6ICdzdGFiaWxpdHknLFxuICAgICAgICBhcGlLZXk6IHN0YWJpbGl0eUtleSxcbiAgICAgICAgZW5kcG9pbnQ6ICdodHRwczovL2FwaS5zdGFiaWxpdHkuYWkvdjEvZ2VuZXJhdGlvbi9zdGFibGUtZGlmZnVzaW9uLXhsLTEwMjQtdjEtMC9pbWFnZS10by1pbWFnZScsXG4gICAgICAgIGlzQ29uZmlndXJlZDogdHJ1ZVxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHJlcGxpY2F0ZUtleSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2VydmljZTogJ3JlcGxpY2F0ZScsXG4gICAgICAgIGFwaUtleTogcmVwbGljYXRlS2V5LFxuICAgICAgICBlbmRwb2ludDogJ2h0dHBzOi8vYXBpLnJlcGxpY2F0ZS5jb20vdjEvcHJlZGljdGlvbnMnLFxuICAgICAgICBpc0NvbmZpZ3VyZWQ6IHRydWVcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChvcGVuYWlLZXkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNlcnZpY2U6ICdvcGVuYWknLFxuICAgICAgICBhcGlLZXk6IG9wZW5haUtleSxcbiAgICAgICAgZW5kcG9pbnQ6ICdodHRwczovL2FwaS5vcGVuYWkuY29tL3YxL2ltYWdlcy9nZW5lcmF0aW9ucycsXG4gICAgICAgIGlzQ29uZmlndXJlZDogdHJ1ZVxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBGYWxsYmFjayB0byBkZW1vIG1vZGVcbiAgICByZXR1cm4ge1xuICAgICAgc2VydmljZTogJ2RlbW8nLFxuICAgICAgYXBpS2V5OiAnJyxcbiAgICAgIGVuZHBvaW50OiAnJyxcbiAgICAgIGlzQ29uZmlndXJlZDogZmFsc2VcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdlbmVyYXRlRm94UGVyc29uKGltYWdlQmxvYjogQmxvYiwgcHJvbXB0OiBzdHJpbmcsIHN0cmVuZ3RoOiBudW1iZXIpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXRoaXMuY29uZmlnLmlzQ29uZmlndXJlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIEFJIHNlcnZpY2UgY29uZmlndXJlZCcpO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhgVXNpbmcgJHt0aGlzLmNvbmZpZy5zZXJ2aWNlfSBzZXJ2aWNlYCk7XG5cbiAgICAgIHN3aXRjaCAodGhpcy5jb25maWcuc2VydmljZSkge1xuICAgICAgICBjYXNlICdzdGFiaWxpdHknOlxuICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdlbmVyYXRlV2l0aFN0YWJpbGl0eShpbWFnZUJsb2IsIHByb21wdCwgc3RyZW5ndGgpO1xuICAgICAgICBjYXNlICdyZXBsaWNhdGUnOlxuICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdlbmVyYXRlV2l0aFJlcGxpY2F0ZShpbWFnZUJsb2IsIHByb21wdCwgc3RyZW5ndGgpO1xuICAgICAgICBjYXNlICdvcGVuYWknOlxuICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdlbmVyYXRlV2l0aE9wZW5BSShpbWFnZUJsb2IsIHByb21wdCwgc3RyZW5ndGgpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgc2VydmljZScpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBSSBnZW5lcmF0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVXaXRoU3RhYmlsaXR5KGltYWdlQmxvYjogQmxvYiwgcHJvbXB0OiBzdHJpbmcsIHN0cmVuZ3RoOiBudW1iZXIpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgZm9ybURhdGEuYXBwZW5kKCdpbml0X2ltYWdlJywgaW1hZ2VCbG9iLCAnaW5wdXQuanBnJyk7XG4gICAgXG4gICAgY29uc3QgZW5oYW5jZWRQcm9tcHQgPSBgVHJhbnNmb3JtIHRoaXMgcGVyc29uIGludG8gYSBiZWF1dGlmdWwgZm94IHBlcnNvbjogJHtwcm9tcHR9LCBhbnRocm9wb21vcnBoaWMgZm94LCBkZXRhaWxlZCBvcmFuZ2UgZnVyLCBwb2ludHkgZm94IGVhcnMsIGJ1c2h5IGZveCB0YWlsLCBodW1hbi1saWtlIGJvZHksIGhpZ2ggcXVhbGl0eSwgZGV0YWlsZWQsIHByb2Zlc3Npb25hbCBwaG90b2dyYXBoeWA7XG4gICAgZm9ybURhdGEuYXBwZW5kKCd0ZXh0X3Byb21wdHNbMF1bdGV4dF0nLCBlbmhhbmNlZFByb21wdCk7XG4gICAgZm9ybURhdGEuYXBwZW5kKCd0ZXh0X3Byb21wdHNbMF1bd2VpZ2h0XScsICcxJyk7XG4gICAgZm9ybURhdGEuYXBwZW5kKCd0ZXh0X3Byb21wdHNbMV1bdGV4dF0nLCAnbG93IHF1YWxpdHksIGJsdXJyeSwgZGlzdG9ydGVkLCBiYWQgYW5hdG9teSwgZGVmb3JtZWQsIHVnbHksIGJhZCBwcm9wb3J0aW9ucycpO1xuICAgIGZvcm1EYXRhLmFwcGVuZCgndGV4dF9wcm9tcHRzWzFdW3dlaWdodF0nLCAnLTEnKTtcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ2NmZ19zY2FsZScsICc3LjUnKTtcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ3N0ZXBzJywgJzMwJyk7XG4gICAgZm9ybURhdGEuYXBwZW5kKCdzYW1wbGVzJywgJzEnKTtcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ3N0eWxlX3ByZXNldCcsICdwaG90b2dyYXBoaWMnKTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5jb25maWcuZW5kcG9pbnQsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmNvbmZpZy5hcGlLZXl9YCxcbiAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgICBib2R5OiBmb3JtRGF0YSxcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgU3RhYmlsaXR5IEFJIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXN9IC0gJHtlcnJvclRleHR9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIFxuICAgIGlmIChyZXN1bHQuYXJ0aWZhY3RzICYmIHJlc3VsdC5hcnRpZmFjdHMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIGBkYXRhOmltYWdlL3BuZztiYXNlNjQsJHtyZXN1bHQuYXJ0aWZhY3RzWzBdLmJhc2U2NH1gO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGltYWdlIGdlbmVyYXRlZCcpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVXaXRoUmVwbGljYXRlKGltYWdlQmxvYjogQmxvYiwgcHJvbXB0OiBzdHJpbmcsIHN0cmVuZ3RoOiBudW1iZXIpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIC8vIENvbnZlcnQgYmxvYiB0byBiYXNlNjRcbiAgICBjb25zdCBiYXNlNjQgPSBhd2FpdCB0aGlzLmJsb2JUb0Jhc2U2NChpbWFnZUJsb2IpO1xuICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGhpcy5jb25maWcuZW5kcG9pbnQsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBUb2tlbiAke3RoaXMuY29uZmlnLmFwaUtleX1gLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgdmVyc2lvbjogXCIzOWVkNTJmMmE3OGU5MzRiM2JhNmUyYTg5ZjViMWM3MTJkZTdkZmVhNTM1NTI1MjU1YjFhYTM1YzU1NjVlMDhiXCIsXG4gICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgaW1hZ2U6IGJhc2U2NCxcbiAgICAgICAgICBwcm9tcHQ6IGBmb3ggcGVyc29uOiAke3Byb21wdH1gLFxuICAgICAgICAgIHN0cmVuZ3RoOiBzdHJlbmd0aFxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUmVwbGljYXRlIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXN1bHQub3V0cHV0WzBdOyAvLyBSZXBsaWNhdGUgcmV0dXJucyBpbWFnZSBVUkxzXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlV2l0aE9wZW5BSShpbWFnZUJsb2I6IEJsb2IsIHByb21wdDogc3RyaW5nLCBzdHJlbmd0aDogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRoaXMuY29uZmlnLmVuZHBvaW50LCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5jb25maWcuYXBpS2V5fWAsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBtb2RlbDogXCJkYWxsLWUtM1wiLFxuICAgICAgICBwcm9tcHQ6IGBUcmFuc2Zvcm0gdGhpcyBwZXJzb24gaW50byBhIGZveCBwZXJzb24gd2l0aCBzdHJlbmd0aCAke3N0cmVuZ3RofTogJHtwcm9tcHR9YCxcbiAgICAgICAgbjogMSxcbiAgICAgICAgc2l6ZTogXCIxMDI0eDEwMjRcIlxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE9wZW5BSSBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gcmVzdWx0LmRhdGFbMF0udXJsOyAvLyBPcGVuQUkgcmV0dXJucyBpbWFnZSBVUkxzXG4gIH1cblxuICBwcml2YXRlIGJsb2JUb0Jhc2U2NChibG9iOiBCbG9iKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlYWRlci5yZXN1bHQgYXMgc3RyaW5nO1xuICAgICAgICByZXNvbHZlKHJlc3VsdC5zcGxpdCgnLCcpWzFdKTsgLy8gUmVtb3ZlIGRhdGE6aW1hZ2UvLi4uO2Jhc2U2NCwgcHJlZml4XG4gICAgICB9O1xuICAgICAgcmVhZGVyLm9uZXJyb3IgPSByZWplY3Q7XG4gICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBpc0NvbmZpZ3VyZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLmlzQ29uZmlndXJlZDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTZXJ2aWNlTmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5zZXJ2aWNlO1xuICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBhaVNlcnZpY2UgPSBuZXcgQUlTZXJ2aWNlKCk7XG4iXSwibmFtZXMiOlsiQUlTZXJ2aWNlIiwibG9hZENvbmZpZyIsInN0YWJpbGl0eUtleSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVEFCSUxJVFlfQVBJX0tFWSIsInJlcGxpY2F0ZUtleSIsIk5FWFRfUFVCTElDX1JFUExJQ0FURV9BUElfS0VZIiwib3BlbmFpS2V5IiwiTkVYVF9QVUJMSUNfT1BFTkFJX0FQSV9LRVkiLCJzZXJ2aWNlIiwiYXBpS2V5IiwiZW5kcG9pbnQiLCJpc0NvbmZpZ3VyZWQiLCJnZW5lcmF0ZUZveFBlcnNvbiIsImltYWdlQmxvYiIsInByb21wdCIsInN0cmVuZ3RoIiwiY29uZmlnIiwiRXJyb3IiLCJjb25zb2xlIiwibG9nIiwiZ2VuZXJhdGVXaXRoU3RhYmlsaXR5IiwiZ2VuZXJhdGVXaXRoUmVwbGljYXRlIiwiZ2VuZXJhdGVXaXRoT3BlbkFJIiwiZXJyb3IiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwiZW5oYW5jZWRQcm9tcHQiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJvayIsImVycm9yVGV4dCIsInRleHQiLCJzdGF0dXMiLCJyZXN1bHQiLCJqc29uIiwiYXJ0aWZhY3RzIiwibGVuZ3RoIiwiYmFzZTY0IiwiYmxvYlRvQmFzZTY0IiwiSlNPTiIsInN0cmluZ2lmeSIsInZlcnNpb24iLCJpbnB1dCIsImltYWdlIiwib3V0cHV0IiwibW9kZWwiLCJuIiwic2l6ZSIsImRhdGEiLCJ1cmwiLCJibG9iIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwic3BsaXQiLCJvbmVycm9yIiwicmVhZEFzRGF0YVVSTCIsImdldFNlcnZpY2VOYW1lIiwiY29uc3RydWN0b3IiLCJhaVNlcnZpY2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/ai-service.ts\n"));

/***/ })

});