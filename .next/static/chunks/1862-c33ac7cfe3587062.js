"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1862],{6044:(e,s,t)=>{t.d(s,{V:()=>n,e:()=>r});var a=t(12115),c=t(90560);function n(e,s){let[t,n]=(0,a.useState)(()=>{try{let s=window.localStorage.getItem(e);if(s){let t=JSON.parse(s);if(e.includes("Date")&&t.year&&t.month&&t.day)return(0,c._U)("".concat(t.year,"-").concat(String(t.month).padStart(2,"0"),"-").concat(String(t.day).padStart(2,"0")));return t}}catch(s){console.warn('Error reading localStorage key "'.concat(e,'":'),s)}return s});return[t,s=>{try{let a="function"==typeof s?s(t):s;n(a),e.includes("Date")&&"object"==typeof a&&null!==a&&"year"in a?window.localStorage.setItem(e,JSON.stringify({year:a.year,month:a.month,day:a.day})):window.localStorage.setItem(e,JSON.stringify(a))}catch(s){console.warn('Error setting localStorage key "'.concat(e,'":'),s)}}]}function r(e){e.forEach(e=>window.localStorage.removeItem(e))}},17606:(e,s,t)=>{t.d(s,{n:()=>r,o:()=>n});var a=t(12115);class c{subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}emit(){this.listeners.forEach(e=>e())}constructor(){this.listeners=new Set}}let n=new c;function r(e){let s=(0,a.useCallback)(async s=>{try{await fetch("/api/notifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageName:e,...s})}),n.emit()}catch(e){console.error("Failed to update page status:",e)}},[e]),t=(0,a.useCallback)(t=>{s({dataLoaded:!0,successCount:1,lastSuccess:t||"Trang ".concat(l(e)," đ\xe3 sẵn s\xe0ng sử dụng")})},[s,e]),c=(0,a.useCallback)(e=>{s({errorCount:1,lastError:e})},[s]),r=(0,a.useCallback)(e=>{s({lastSuccess:e})},[s]),o=(0,a.useCallback)((e,t)=>{s({successCount:1,lastSuccess:t?"Dữ liệu ".concat(e,": ").concat(t.toLocaleString()," bản ghi đ\xe3 sẵn s\xe0ng"):"Dữ liệu ".concat(e," đ\xe3 được tải th\xe0nh c\xf4ng")})},[s]),i=(0,a.useCallback)((e,t)=>{s({errorCount:1,lastError:"Kh\xf4ng thể tải dữ liệu ".concat(e,": ").concat(t)})},[s]),d=(0,a.useCallback)(e=>{s({lastSuccess:"Bộ lọc ".concat(e," đ\xe3 được cập nhật")})},[s]),u=(0,a.useCallback)(()=>{s({lastSuccess:"Tất cả bộ lọc đ\xe3 được đặt lại về mặc định"})},[s]),h=(0,a.useCallback)((e,t)=>{s({lastSuccess:"Biểu đồ ".concat(e,": ").concat(t)})},[s]),g=(0,a.useCallback)(t=>{let a="Trang ".concat(l(e)," đ\xe3 tải xong");t.loadTime&&(a+=" (".concat(t.loadTime,"ms)")),t.dataSize&&(a+=" - ".concat(t.dataSize," bản ghi")),s({dataLoaded:!0,successCount:1,lastSuccess:a})},[s,e]);return(0,a.useEffect)(()=>{s({dataLoaded:!1,errorCount:0,successCount:0})},[s]),{reportPageLoad:t,reportPageError:c,reportPageActivity:r,reportDataLoadSuccess:o,reportDataLoadError:i,reportFilterChange:d,reportResetFilters:u,reportChartInteraction:h,reportPagePerformance:g}}function l(e){return({customers:"Kh\xe1ch h\xe0ng",orders:"Đơn h\xe0ng",services:"Dịch vụ",dashboard:"Tổng quan"})[e]||e}},37945:(e,s,t)=>{t.d(s,{E:()=>o,h:()=>i});var a=t(95155),c=t(12115),n=t(40646),r=t(54861),l=t(54416);let o=e=>{let{type:s,message:t,isVisible:o,onClose:i,duration:d=5e3}=e,[u,h]=(0,c.useState)(!1);if((0,c.useEffect)(()=>{if(o){h(!0);let e=setTimeout(()=>{h(!1),setTimeout(i,300)},d);return()=>clearTimeout(e)}},[o,d,i]),!o)return null;let g="success"===s?"text-green-800":"text-red-800",m="success"===s?n.A:r.A;return(0,a.jsx)("div",{className:"fixed top-4 right-4 z-50 max-w-sm w-full transition-all duration-300 ease-in-out ".concat(u?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"),children:(0,a.jsx)("div",{className:"".concat("success"===s?"bg-green-50":"bg-red-50"," border ").concat("success"===s?"border-green-200":"border-red-200"," rounded-lg shadow-lg p-4"),children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(m,{className:"h-5 w-5 ".concat("success"===s?"text-green-400":"text-red-400")})}),(0,a.jsx)("div",{className:"ml-3 flex-1",children:(0,a.jsx)("p",{className:"text-sm font-medium ".concat(g),children:t})}),(0,a.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,a.jsx)("button",{onClick:()=>{h(!1),setTimeout(i,300)},className:"inline-flex ".concat(g," hover:").concat(g," focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-").concat("success"===s?"green":"red","-500"),children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})})]})})})},i=()=>{let[e,s]=(0,c.useState)({type:"success",message:"",isVisible:!1});return{notification:e,showSuccess:e=>{s({type:"success",message:e,isVisible:!0})},showError:e=>{s({type:"error",message:e,isVisible:!0})},hideNotification:()=>{s(e=>({...e,isVisible:!1}))}}}},41088:(e,s,t)=>{t.d(s,{A:()=>c});var a=t(95155);t(12115);let c=e=>{let{startDate:s,endDate:t,setStartDate:c,setEndDate:n,today:r,getLocalTimeZone:l,parseDate:o,selectedType:i,setSelectedType:d,showTypeDropdown:u,setShowTypeDropdown:h,customerTypes:g,selectedStatus:m,setSelectedStatus:x,showStatusDropdown:b,setShowStatusDropdown:p,customerStatus:f,selectedRegions:y,setSelectedRegions:N,showRegionDropdown:j,setShowRegionDropdown:w,allRegions:v,selectedBranches:k,setSelectedBranches:C,showBranchDropdown:S,setShowBranchDropdown:T,allBranches:E}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-4 lg:gap-6 mb-4 lg:mb-6",children:[(0,a.jsxs)("div",{className:"w-full flex flex-col sm:flex-row gap-4 bg-white p-4 rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"flex-1 flex flex-col gap-1",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Start date"}),(0,a.jsx)("input",{type:"date",className:"border border-gray-300 rounded p-2 bg-white focus:outline-none focus:ring-2 focus:ring-[#f66035]",value:s.toString(),onChange:e=>{c(o(e.target.value))},max:r(l()).toString()})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col gap-1",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"End date"}),(0,a.jsx)("input",{type:"date",className:"border border-gray-300 rounded p-2 bg-white focus:outline-none focus:ring-2 focus:ring-[#f66035]",value:t.toString(),onChange:e=>{n(o(e.target.value))},min:s?s.add({days:1}).toString():void 0,max:r(l()).toString()})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{className:"block border rounded p-2 w-full text-left bg-white shadow border-[orange] hover:bg-gray-50 transition-colors",onClick:()=>h(!u),type:"button",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Loại kh\xe1ch"}),i.length>0&&(0,a.jsxs)("span",{children:[" (",i.length,")"]}),(0,a.jsx)("span",{className:"float-right",children:"▼"})]}),u&&(0,a.jsxs)("div",{className:"absolute z-20 bg-white border rounded shadow w-full mt-1 max-h-60 overflow-auto",children:[(0,a.jsxs)("label",{className:"flex items-center px-3 py-2 cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)("input",{type:"checkbox",checked:0===i.length,onChange:()=>d([]),className:"mr-2"}),"Tất cả"]}),g.map(e=>(0,a.jsxs)("label",{className:"flex items-center px-3 py-2 cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)("input",{type:"checkbox",checked:i.includes(e),onChange:()=>{i.includes(e)?d(i.filter(s=>s!==e)):d([...i,e])},className:"mr-2"}),e]},e)),(0,a.jsx)("button",{className:"w-full text-center py-2 text-orange-600 hover:underline",onClick:()=>h(!1),type:"button",children:"Đ\xf3ng"})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{className:"block border rounded p-2 w-full text-left bg-white shadow border-[orange] hover:bg-gray-50 transition-colors",onClick:()=>p(!b),type:"button",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Kh\xe1ch mới/cũ"}),m&&(0,a.jsxs)("span",{children:[": ",m]}),(0,a.jsx)("span",{className:"float-right",children:"▼"})]}),b&&(0,a.jsxs)("div",{className:"absolute z-20 bg-white border rounded shadow w-full mt-1 max-h-60 overflow-auto",children:[(0,a.jsxs)("label",{className:"flex items-center px-3 py-2 cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)("input",{type:"radio",name:"customerStatus",checked:!m,onChange:()=>x(null),className:"mr-2"}),"Tất cả"]}),f.map(e=>(0,a.jsxs)("label",{className:"flex items-center px-3 py-2 cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)("input",{type:"radio",name:"customerStatus",checked:m===e,onChange:()=>x(e),className:"mr-2"}),e]},e)),(0,a.jsx)("button",{className:"w-full text-center py-2 text-orange-600 hover:underline",onClick:()=>p(!1),type:"button",children:"Đ\xf3ng"})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{className:"block border rounded p-2 w-full text-left bg-white shadow border-[orange] hover:bg-gray-50 transition-colors",onClick:()=>w(!j),type:"button",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Region"}),y.length>0&&(0,a.jsxs)("span",{children:[" (",y.length,")"]}),(0,a.jsx)("span",{className:"float-right",children:"▼"})]}),j&&(0,a.jsxs)("div",{className:"absolute z-20 bg-white border rounded shadow w-full mt-1 max-h-60 overflow-auto",children:[(0,a.jsxs)("label",{className:"flex items-center px-3 py-2 cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)("input",{type:"checkbox",checked:0===y.length,onChange:()=>N([]),className:"mr-2"}),"Tất cả"]}),v.map(e=>(0,a.jsxs)("label",{className:"flex items-center px-3 py-2 cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)("input",{type:"checkbox",checked:y.includes(e),onChange:()=>{y.includes(e)?N(y.filter(s=>s!==e)):N([...y,e])},className:"mr-2"}),e]},e)),(0,a.jsx)("button",{className:"w-full text-center py-2 text-orange-600 hover:underline",onClick:()=>w(!1),type:"button",children:"Đ\xf3ng"})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{className:"block border rounded p-2 w-full text-left bg-white shadow border-[orange]",onClick:()=>T(!S),type:"button",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Branch"}),k.length>0&&(0,a.jsxs)("span",{children:[" (",k.length,")"]}),(0,a.jsx)("span",{className:"float-right",children:"▼"})]}),S&&(0,a.jsxs)("div",{className:"absolute z-20 bg-white border rounded shadow w-64 mt-1 max-h-60 overflow-auto",children:[(0,a.jsxs)("label",{className:"flex items-center px-3 py-2 cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)("input",{type:"checkbox",checked:0===k.length,onChange:()=>C([]),className:"mr-2"}),"Tất cả"]}),E.map(e=>(0,a.jsxs)("label",{className:"flex items-center px-3 py-2 cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)("input",{type:"checkbox",checked:k.includes(e),onChange:()=>{k.includes(e)?C(k.filter(s=>s!==e)):C([...k,e])},className:"mr-2"}),e]},e)),(0,a.jsx)("button",{className:"w-full text-center py-2 text-orange-600 hover:underline",onClick:()=>T(!1),type:"button",children:"Đ\xf3ng"})]})]})]})]})}}}]);